<!DOCTYPE html>
<html lang="en" style="height: 75%;">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
                <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300..700&display=swap" rel="stylesheet">
        <style>
            a, 
            input,
            h1,
            h5, 
            button[type="submit"], 
            input[type="text"], 
            input[type="number"] {
                font-family: "Quicksand";
            }
        </style>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <title> Create Section </title>
        <script>

            document.addEventListener('DOMContentLoaded', function() {
                var creationScreen = document.getElementById("creation-screen");
                var passcodeScreen = document.getElementById("passcode-view-screen");
                var passcodeText = document.getElementById("passcode-display");

                creationScreen.hidden = false;
                passcodeScreen.hidden = true;

                document.getElementById('create-section-form').onsubmit = function() {
                    event.preventDefault();
                    
                    const name = document.getElementById('create-section-name').value;
                    const desc = document.getElementById('create-section-description').value;
                    const maxSize = parseInt(document.getElementById('create-section-maxsize').value);

                    const newSection = {
                        sectionName: name,
                        sectionDetails: desc,
                        maxSize: maxSize
                    }

                    fetch("api/create_section", {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(newSection)
                    })
                    .then(response => response.json())
                    .then(data => {
                        const passcode = data["passcode"];
                        creationScreen.hidden = true;
                        passcodeScreen.hidden = false;
                        passcodeText.innerText = passcode;
                    });
                }

            })

        </script>
    </head>
    <body class="d-flex flex-column" style="height: 100%">

        <div>
            <nav class="navbar navbar-light bg-transparent">
                <a class="navbar-brand px-5 pt-4" href="/">
                    <img src="{{ url_for('static', path='/templates/logo/GroupMeLogo.svg') }}" height="30" alt="Logo">
                </a>
            </nav>
        </div>
        
        <content class="d-flex justify-content-center align-items-center flex-grow-1">
            
            <div id="creation-screen" class="text-center" hidden> 
                
                <h5> Create a Class </h5>
                
                <form class="justify-content-center my-2" method="post" id="create-section-form">
                    <div>
                        <input class="form-control mx-1 my-2" id="create-section-name" type="text" placeholder="Name your class" required>
                    </div>
                    <div>

                    </div>
                    <textarea class="form-control mx-1 my-2" id="create-section-description" placeholder="Description" style="font-family: Quicksand; min-height: 50px;"></textarea>
                    <input class="form-control mx-1 my-2" id="create-section-maxsize" type="number" placeholder="Max Size" min="1" max="500" required>
                    <button class="btn btn-outline-success w-100" id="create-section-submit" type="submit"> 
                        Create 
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right-circle" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0M4.5 7.5a.5.5 0 0 0 0 1h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 1 0-.708.708L10.293 7.5z"/>
                        </svg>
                    </button>
                </form>
                
            </div>

            <div id="passcode-view-screen" class="text-center">
                
                <h5> <u>Remember</u> your class code </h5>

                <div class="card my-2">

                    <div class="card-body">

                        <h1 id="passcode-display"></h1>

                    </div>

                </div>

                <a href="/">
                    <button class="btn btn-outline-success">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-return-left" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5"/>
                        </svg>
                        Return
                    </button>
                </a>

            </div>

        </content>

    </body>
</html>